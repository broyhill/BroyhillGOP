<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Donor Intelligence - Dual Grading | BroyhillGOP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@3.5.0/dist/tabler-icons.min.css">
    <style>
        :root { 
            --text-primary: #1d1d1f; 
            --text-secondary: #86868b; 
            --bg-primary: #ffffff; 
            --bg-secondary: #f5f5f7; 
            --border-light: #e8e8ed; 
            --accent: #0071e3; 
            --success: #34c759; 
            --warning: #ff9500; 
            --danger: #ff3b30; 
            --purple: #af52de; 
            --sidebar-width: 280px; 
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Inter, -apple-system, sans-serif; background: var(--bg-secondary); color: var(--text-primary); font-size: 14px; -webkit-font-smoothing: antialiased; }
        .app { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: var(--sidebar-width); background: var(--bg-primary); border-right: 1px solid var(--border-light); position: fixed; top: 0; left: 0; bottom: 0; display: flex; flex-direction: column; z-index: 100; }
        .sidebar-header { padding: 24px; border-bottom: 1px solid var(--border-light); }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #cc0000, #990000); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; }
        .logo-text { font-size: 18px; font-weight: 700; color: var(--text-primary); }
        
        /* Main Content */
        .main { flex: 1; margin-left: var(--sidebar-width); min-height: 100vh; }
        .topbar { background: var(--bg-primary); border-bottom: 1px solid var(--border-light); padding: 16px 32px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 50; }
        .page-title { font-size: 24px; font-weight: 600; }
        .page-content { padding: 32px; }
        
        /* Grade Toggle */
        .grade-toggle { display: flex; background: var(--bg-secondary); border-radius: 12px; padding: 4px; gap: 4px; }
        .grade-toggle-btn { padding: 10px 20px; border-radius: 8px; border: none; background: transparent; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        .grade-toggle-btn.active { background: var(--bg-primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .grade-toggle-btn:hover:not(.active) { background: rgba(0,0,0,0.05); }
        
        /* Stats Cards */
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 32px; }
        .stat-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; padding: 24px; }
        .stat-value { font-size: 32px; font-weight: 800; margin-bottom: 4px; }
        .stat-value.blue { color: var(--accent); }
        .stat-value.green { color: var(--success); }
        .stat-value.purple { color: var(--purple); }
        .stat-value.orange { color: var(--warning); }
        .stat-label { font-size: 14px; color: var(--text-secondary); }
        
        /* Dual Grade Display */
        .dual-grade-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; padding: 24px; margin-bottom: 24px; }
        .dual-grade-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .dual-grade-title { font-size: 18px; font-weight: 700; }
        
        .grade-comparison { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .grade-column { padding: 20px; background: var(--bg-secondary); border-radius: 12px; }
        .grade-column-title { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .grade-column-title i { font-size: 18px; }
        
        /* Grade Distribution Bars */
        .grade-row { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .grade-label { width: 40px; font-weight: 700; font-size: 14px; }
        .grade-bar-bg { flex: 1; height: 28px; background: rgba(0,0,0,0.05); border-radius: 6px; overflow: hidden; }
        .grade-bar { height: 100%; border-radius: 6px; display: flex; align-items: center; padding-left: 12px; color: white; font-weight: 600; font-size: 12px; transition: width 0.5s ease; }
        .grade-bar.a-plus { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .grade-bar.a { background: linear-gradient(90deg, #0ea5e9, #0284c7); }
        .grade-bar.b { background: linear-gradient(90deg, #8b5cf6, #7c3aed); }
        .grade-bar.c { background: linear-gradient(90deg, #f59e0b, #d97706); }
        .grade-bar.d { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .grade-count { width: 60px; text-align: right; font-size: 13px; color: var(--text-secondary); }
        
        /* County Selector */
        .county-selector { margin-bottom: 24px; }
        .county-select { width: 100%; max-width: 300px; padding: 12px 16px; border: 1px solid var(--border-light); border-radius: 10px; font-size: 14px; background: var(--bg-primary); }
        
        /* Donor Table */
        .table-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; overflow: hidden; }
        .table-header { padding: 20px 24px; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; }
        .table-title { font-size: 18px; font-weight: 700; }
        
        .donor-table { width: 100%; border-collapse: collapse; }
        .donor-table th { text-align: left; padding: 14px 20px; font-size: 11px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; background: var(--bg-secondary); }
        .donor-table td { padding: 16px 20px; border-bottom: 1px solid var(--border-light); }
        .donor-table tr:hover { background: var(--bg-secondary); }
        
        .donor-name { font-weight: 600; }
        .donor-county { font-size: 12px; color: var(--text-secondary); }
        
        /* Grade Badges */
        .grade-badge { display: inline-flex; align-items: center; justify-content: center; min-width: 44px; height: 28px; border-radius: 6px; font-weight: 700; font-size: 12px; padding: 0 8px; }
        .grade-badge.a-plus { background: #dcfce7; color: #166534; }
        .grade-badge.a { background: #dbeafe; color: #1e40af; }
        .grade-badge.b { background: #f3e8ff; color: #6b21a8; }
        .grade-badge.c { background: #fef3c7; color: #92400e; }
        .grade-badge.d { background: #fee2e2; color: #991b1b; }
        
        .rank-badge { font-size: 12px; color: var(--text-secondary); }
        .rank-badge strong { color: var(--text-primary); }
        
        .amount { font-weight: 700; color: var(--success); }
        
        /* Dual Grade Cell */
        .dual-grade-cell { display: flex; gap: 8px; align-items: center; }
        .grade-pair { display: flex; flex-direction: column; align-items: center; gap: 2px; }
        .grade-pair-label { font-size: 9px; color: var(--text-secondary); text-transform: uppercase; }
        
        /* Navigation */
        .nav-section { padding: 16px; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 10px; color: var(--text-primary); text-decoration: none; font-weight: 500; margin-bottom: 4px; transition: background 0.2s; }
        .nav-item:hover { background: var(--bg-secondary); }
        .nav-item.active { background: var(--accent); color: white; }
        .nav-item i { font-size: 20px; }
        
        /* Filter Bar */
        .filter-bar { display: flex; gap: 12px; margin-bottom: 20px; }
        .filter-input { flex: 1; padding: 12px 16px; border: 1px solid var(--border-light); border-radius: 10px; font-size: 14px; }
        .filter-btn { padding: 12px 20px; border: 1px solid var(--border-light); border-radius: 10px; background: var(--bg-primary); font-weight: 500; cursor: pointer; }
        .filter-btn:hover { background: var(--bg-secondary); }
        .filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">B</div>
                    <span class="logo-text">BroyhillGOP</span>
                </a>
            </div>
            
            <nav class="nav-section">
                <a href="index.html" class="nav-item"><i class="ti ti-dashboard"></i> Dashboard</a>
                <a href="ecosystem-donor-intelligence-dual.html" class="nav-item active"><i class="ti ti-users"></i> Donor Intelligence</a>
                <a href="ecosystem-volunteers.html" class="nav-item"><i class="ti ti-heart-handshake"></i> Volunteers</a>
                <a href="ecosystem-donations.html" class="nav-item"><i class="ti ti-currency-dollar"></i> Donations</a>
                <a href="ecosystem-email.html" class="nav-item"><i class="ti ti-mail"></i> Email</a>
                <a href="ecosystem-sms.html" class="nav-item"><i class="ti ti-message"></i> SMS</a>
                <a href="ecosystem-events.html" class="nav-item"><i class="ti ti-calendar-event"></i> Events</a>
                <a href="ecosystem-analytics.html" class="nav-item"><i class="ti ti-chart-bar"></i> Analytics</a>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main">
            <header class="topbar">
                <h1 class="page-title">Donor Intelligence</h1>
                <div class="grade-toggle">
                    <button class="grade-toggle-btn active" onclick="setGradeView('state')">
                        <i class="ti ti-map"></i> Statewide
                    </button>
                    <button class="grade-toggle-btn" onclick="setGradeView('county')">
                        <i class="ti ti-building-community"></i> By County
                    </button>
                </div>
            </header>
            
            <div class="page-content">
                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value blue" id="total-donors">130,245</div>
                        <div class="stat-label">Total Donors</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value green" id="total-donations">$47.2M</div>
                        <div class="stat-label">Total Donations (5yr)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value purple" id="a-tier-count">8,450</div>
                        <div class="stat-label">A-Tier Donors</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value orange" id="counties-count">100</div>
                        <div class="stat-label">NC Counties</div>
                    </div>
                </div>
                
                <!-- County Selector (hidden by default) -->
                <div class="county-selector" id="county-selector" style="display: none;">
                    <select class="county-select" id="county-select" onchange="loadCountyData()">
                        <option value="">Select a County...</option>
                        <option value="Forsyth">Forsyth County</option>
                        <option value="Guilford">Guilford County</option>
                        <option value="Mecklenburg">Mecklenburg County</option>
                        <option value="Wake">Wake County</option>
                        <option value="Buncombe">Buncombe County</option>
                        <option value="Durham">Durham County</option>
                        <option value="Orange">Orange County</option>
                        <option value="Cumberland">Cumberland County</option>
                        <option value="Cabarrus">Cabarrus County</option>
                        <option value="Union">Union County</option>
                        <!-- Add more counties as needed -->
                    </select>
                </div>
                
                <!-- Dual Grade Comparison -->
                <div class="dual-grade-card">
                    <div class="dual-grade-header">
                        <div class="dual-grade-title">Grade Distribution</div>
                    </div>
                    
                    <div class="grade-comparison">
                        <!-- State Grades -->
                        <div class="grade-column" id="state-grades">
                            <div class="grade-column-title">
                                <i class="ti ti-map"></i> Statewide Rankings
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A++</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 1%;">130</div></div>
                                <span class="grade-count">130</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A+</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 9%;">1,170</div></div>
                                <span class="grade-count">1,170</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 40%;">5,200</div></div>
                                <span class="grade-count">5,200</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A-</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 50%;">6,500</div></div>
                                <span class="grade-count">6,500</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B+</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 100%;">13,000</div></div>
                                <span class="grade-count">13,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 100%;">13,000</div></div>
                                <span class="grade-count">13,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">C</span>
                                <div class="grade-bar-bg"><div class="grade-bar c" style="width: 100%;">39,000</div></div>
                                <span class="grade-count">39,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">D</span>
                                <div class="grade-bar-bg"><div class="grade-bar d" style="width: 100%;">52,245</div></div>
                                <span class="grade-count">52,245</span>
                            </div>
                        </div>
                        
                        <!-- County Grades -->
                        <div class="grade-column" id="county-grades">
                            <div class="grade-column-title">
                                <i class="ti ti-building-community"></i> County Rankings (All Counties)
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A++</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 1%;">130</div></div>
                                <span class="grade-count">~100</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A+</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 9%;">1,170</div></div>
                                <span class="grade-count">~1,300</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 40%;">5,200</div></div>
                                <span class="grade-count">~6,500</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A-</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 50%;">6,500</div></div>
                                <span class="grade-count">~6,500</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B+</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 100%;">13,000</div></div>
                                <span class="grade-count">~13,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 100%;">13,000</div></div>
                                <span class="grade-count">~13,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">C</span>
                                <div class="grade-bar-bg"><div class="grade-bar c" style="width: 100%;">39,000</div></div>
                                <span class="grade-count">~39,000</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">D</span>
                                <div class="grade-bar-bg"><div class="grade-bar d" style="width: 100%;">52,245</div></div>
                                <span class="grade-count">~51,000</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Donor Table -->
                <div class="table-card">
                    <div class="table-header">
                        <div class="table-title" id="table-title">Top Donors - Statewide</div>
                        <div class="filter-bar">
                            <input type="text" class="filter-input" placeholder="Search donors..." id="search-input">
                            <button class="filter-btn active" data-grade="all">All</button>
                            <button class="filter-btn" data-grade="A">A-Tier</button>
                            <button class="filter-btn" data-grade="B">B-Tier</button>
                            <button class="filter-btn" data-grade="C">C-Tier</button>
                        </div>
                    </div>
                    
                    <table class="donor-table">
                        <thead>
                            <tr>
                                <th>Donor</th>
                                <th>State Grade</th>
                                <th>County Grade</th>
                                <th>Total Donations</th>
                                <th>County</th>
                                <th>State Rank</th>
                                <th>County Rank</th>
                            </tr>
                        </thead>
                        <tbody id="donor-table-body">
                            <tr>
                                <td>
                                    <div class="donor-name">Art Pope</div>
                                    <div class="donor-county">art.pope@email.com</div>
                                </td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$2,847,500</td>
                                <td>Wake</td>
                                <td class="rank-badge"><strong>#1</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#1</strong> of 18,432</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">James Pope</div>
                                    <div class="donor-county">james.pope@email.com</div>
                                </td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$1,925,000</td>
                                <td>Wake</td>
                                <td class="rank-badge"><strong>#2</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#2</strong> of 18,432</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Ed Broyhill</div>
                                    <div class="donor-county">ed@broyhill.net</div>
                                </td>
                                <td><span class="grade-badge a-plus">A+</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$485,000</td>
                                <td>Forsyth</td>
                                <td class="rank-badge"><strong>#31</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#1</strong> of 8,245</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">John Smith</div>
                                    <div class="donor-county">john.smith@email.com</div>
                                </td>
                                <td><span class="grade-badge a">A</span></td>
                                <td><span class="grade-badge a-plus">A+</span></td>
                                <td class="amount">$125,000</td>
                                <td>Forsyth</td>
                                <td class="rank-badge"><strong>#892</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#5</strong> of 8,245</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Mary Johnson</div>
                                    <div class="donor-county">mary.j@email.com</div>
                                </td>
                                <td><span class="grade-badge b">B+</span></td>
                                <td><span class="grade-badge a">A-</span></td>
                                <td class="amount">$18,500</td>
                                <td>Wilkes</td>
                                <td class="rank-badge"><strong>#15,234</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#12</strong> of 1,245</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Robert Williams</div>
                                    <div class="donor-county">rwilliams@email.com</div>
                                </td>
                                <td><span class="grade-badge c">C+</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$4,200</td>
                                <td>Alleghany</td>
                                <td class="rank-badge"><strong>#52,891</strong> of 130,245</td>
                                <td class="rank-badge"><strong>#1</strong> of 187</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Insight Card -->
                <div class="dual-grade-card" style="background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border-color: #0ea5e9;">
                    <h3 style="margin-bottom: 12px; color: #0369a1;">ðŸ’¡ Dual Grading Insight</h3>
                    <p style="color: #0c4a6e; line-height: 1.6;">
                        <strong>Robert Williams</strong> is only a <strong>C+</strong> statewide (rank #52,891), but he's the <strong>#1 donor in Alleghany County</strong> (A++ locally). 
                        For a Sheriff's race in Alleghany, he should be treated as a top donor. For a Governor's race, he's mid-tier.
                        <br><br>
                        <strong>This is why dual grading matters!</strong> Local campaigns can find their A++ donors even if they're not wealthy statewide.
                    </p>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // Grade view toggle
        function setGradeView(view) {
            const stateBtn = document.querySelector('.grade-toggle-btn:first-child');
            const countyBtn = document.querySelector('.grade-toggle-btn:last-child');
            const countySelector = document.getElementById('county-selector');
            const tableTitle = document.getElementById('table-title');
            
            if (view === 'state') {
                stateBtn.classList.add('active');
                countyBtn.classList.remove('active');
                countySelector.style.display = 'none';
                tableTitle.textContent = 'Top Donors - Statewide';
            } else {
                stateBtn.classList.remove('active');
                countyBtn.classList.add('active');
                countySelector.style.display = 'block';
                tableTitle.textContent = 'Top Donors - By County';
            }
        }
        
        // County data loader (placeholder)
        function loadCountyData() {
            const county = document.getElementById('county-select').value;
            const tableTitle = document.getElementById('table-title');
            if (county) {
                tableTitle.textContent = `Top Donors - ${county} County`;
                // In production, this would fetch from Supabase
                console.log(`Loading data for ${county} county...`);
            }
        }
        
        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                // Filter logic would go here
            });
        });
    </script>
</body>
</html>
