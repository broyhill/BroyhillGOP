<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Donor Intelligence - Triple Grading | BroyhillGOP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@3.5.0/dist/tabler-icons.min.css">
    <style>
        :root { 
            --text-primary: #1d1d1f; 
            --text-secondary: #86868b; 
            --bg-primary: #ffffff; 
            --bg-secondary: #f5f5f7; 
            --border-light: #e8e8ed; 
            --accent: #0071e3; 
            --success: #34c759; 
            --warning: #ff9500; 
            --danger: #ff3b30; 
            --purple: #af52de; 
            --sidebar-width: 280px; 
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Inter, -apple-system, sans-serif; background: var(--bg-secondary); color: var(--text-primary); font-size: 14px; -webkit-font-smoothing: antialiased; }
        .app { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar { width: var(--sidebar-width); background: var(--bg-primary); border-right: 1px solid var(--border-light); position: fixed; top: 0; left: 0; bottom: 0; display: flex; flex-direction: column; z-index: 100; }
        .sidebar-header { padding: 24px; border-bottom: 1px solid var(--border-light); }
        .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
        .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, #cc0000, #990000); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; }
        .logo-text { font-size: 18px; font-weight: 700; color: var(--text-primary); }
        
        /* Main Content */
        .main { flex: 1; margin-left: var(--sidebar-width); min-height: 100vh; }
        .topbar { background: var(--bg-primary); border-bottom: 1px solid var(--border-light); padding: 16px 32px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 50; }
        .page-title { font-size: 24px; font-weight: 600; }
        .page-content { padding: 32px; }
        
        /* Triple Grade Toggle */
        .grade-toggle { display: flex; background: var(--bg-secondary); border-radius: 12px; padding: 4px; gap: 4px; }
        .grade-toggle-btn { padding: 10px 16px; border-radius: 8px; border: none; background: transparent; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 6px; font-size: 13px; }
        .grade-toggle-btn.active { background: var(--bg-primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); color: var(--accent); }
        .grade-toggle-btn:hover:not(.active) { background: rgba(0,0,0,0.05); }
        .grade-toggle-btn i { font-size: 16px; }
        
        /* Stats Cards */
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 32px; }
        .stat-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; padding: 24px; }
        .stat-value { font-size: 32px; font-weight: 800; margin-bottom: 4px; }
        .stat-value.blue { color: var(--accent); }
        .stat-value.green { color: var(--success); }
        .stat-value.purple { color: var(--purple); }
        .stat-value.orange { color: var(--warning); }
        .stat-label { font-size: 14px; color: var(--text-secondary); }
        
        /* Context Selector */
        .context-selector { margin-bottom: 24px; display: none; }
        .context-selector.visible { display: block; }
        .context-select { width: 100%; max-width: 400px; padding: 12px 16px; border: 1px solid var(--border-light); border-radius: 10px; font-size: 14px; background: var(--bg-primary); }
        .context-label { font-size: 12px; font-weight: 600; color: var(--text-secondary); margin-bottom: 8px; display: block; }
        
        /* Triple Grade Card */
        .triple-grade-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; padding: 24px; margin-bottom: 24px; }
        .triple-grade-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .triple-grade-title { font-size: 18px; font-weight: 700; }
        
        .grade-comparison { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        .grade-column { padding: 20px; background: var(--bg-secondary); border-radius: 12px; }
        .grade-column.active { background: linear-gradient(135deg, #f0f9ff, #e0f2fe); border: 2px solid var(--accent); }
        .grade-column-title { font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }
        .grade-column-title i { font-size: 18px; }
        .grade-column.active .grade-column-title { color: var(--accent); }
        
        /* Grade Distribution Bars */
        .grade-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
        .grade-label { width: 36px; font-weight: 700; font-size: 12px; }
        .grade-bar-bg { flex: 1; height: 24px; background: rgba(0,0,0,0.05); border-radius: 6px; overflow: hidden; }
        .grade-bar { height: 100%; border-radius: 6px; display: flex; align-items: center; padding-left: 10px; color: white; font-weight: 600; font-size: 11px; transition: width 0.5s ease; }
        .grade-bar.a-plus { background: linear-gradient(90deg, #22c55e, #16a34a); }
        .grade-bar.a { background: linear-gradient(90deg, #0ea5e9, #0284c7); }
        .grade-bar.b { background: linear-gradient(90deg, #8b5cf6, #7c3aed); }
        .grade-bar.c { background: linear-gradient(90deg, #f59e0b, #d97706); }
        .grade-bar.d { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .grade-bar.u { background: linear-gradient(90deg, #6b7280, #4b5563); }
        .grade-count { width: 55px; text-align: right; font-size: 12px; color: var(--text-secondary); }
        
        /* Donor Table */
        .table-card { background: var(--bg-primary); border: 1px solid var(--border-light); border-radius: 16px; overflow: hidden; }
        .table-header { padding: 20px 24px; border-bottom: 1px solid var(--border-light); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
        .table-title { font-size: 18px; font-weight: 700; }
        
        .donor-table { width: 100%; border-collapse: collapse; }
        .donor-table th { text-align: left; padding: 14px 16px; font-size: 11px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; background: var(--bg-secondary); }
        .donor-table td { padding: 14px 16px; border-bottom: 1px solid var(--border-light); }
        .donor-table tr:hover { background: var(--bg-secondary); }
        
        .donor-name { font-weight: 600; }
        .donor-location { font-size: 12px; color: var(--text-secondary); }
        
        /* Grade Badges */
        .grade-badge { display: inline-flex; align-items: center; justify-content: center; min-width: 40px; height: 26px; border-radius: 6px; font-weight: 700; font-size: 11px; padding: 0 8px; }
        .grade-badge.a-plus { background: #dcfce7; color: #166534; }
        .grade-badge.a { background: #dbeafe; color: #1e40af; }
        .grade-badge.b { background: #f3e8ff; color: #6b21a8; }
        .grade-badge.c { background: #fef3c7; color: #92400e; }
        .grade-badge.d { background: #fee2e2; color: #991b1b; }
        .grade-badge.u { background: #f3f4f6; color: #4b5563; }
        .grade-badge.highlight { box-shadow: 0 0 0 2px var(--accent); }
        
        .rank-badge { font-size: 11px; color: var(--text-secondary); }
        .rank-badge strong { color: var(--text-primary); }
        
        .amount { font-weight: 700; color: var(--success); }
        
        /* Navigation */
        .nav-section { padding: 16px; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: 10px; color: var(--text-primary); text-decoration: none; font-weight: 500; margin-bottom: 4px; transition: background 0.2s; }
        .nav-item:hover { background: var(--bg-secondary); }
        .nav-item.active { background: var(--accent); color: white; }
        .nav-item i { font-size: 20px; }
        
        /* Filter Bar */
        .filter-bar { display: flex; gap: 12px; flex-wrap: wrap; }
        .filter-input { flex: 1; min-width: 200px; padding: 10px 14px; border: 1px solid var(--border-light); border-radius: 8px; font-size: 13px; }
        .filter-btn { padding: 10px 16px; border: 1px solid var(--border-light); border-radius: 8px; background: var(--bg-primary); font-weight: 500; cursor: pointer; font-size: 12px; }
        .filter-btn:hover { background: var(--bg-secondary); }
        .filter-btn.active { background: var(--accent); color: white; border-color: var(--accent); }
        
        /* Insight Card */
        .insight-card { background: linear-gradient(135deg, #fef3c7, #fde68a); border: 1px solid #fbbf24; border-radius: 16px; padding: 20px; margin-top: 24px; }
        .insight-card.blue { background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-color: #3b82f6; }
        .insight-card h3 { margin-bottom: 10px; font-size: 15px; }
        .insight-card p { line-height: 1.6; font-size: 13px; }
        
        /* Office Context Mapping Table */
        .context-table { width: 100%; border-collapse: collapse; margin-top: 16px; }
        .context-table th, .context-table td { padding: 10px 12px; text-align: left; border-bottom: 1px solid var(--border-light); font-size: 13px; }
        .context-table th { background: var(--bg-secondary); font-weight: 600; font-size: 11px; text-transform: uppercase; }
        .context-table tr:hover { background: var(--bg-secondary); }
        .context-badge { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 600; }
        .context-badge.state { background: #dbeafe; color: #1e40af; }
        .context-badge.district { background: #f3e8ff; color: #6b21a8; }
        .context-badge.county { background: #dcfce7; color: #166534; }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">B</div>
                    <span class="logo-text">BroyhillGOP</span>
                </a>
            </div>
            
            <nav class="nav-section">
                <a href="index.html" class="nav-item"><i class="ti ti-dashboard"></i> Dashboard</a>
                <a href="ecosystem-donor-intelligence-triple.html" class="nav-item active"><i class="ti ti-users"></i> Donor Intelligence</a>
                <a href="ecosystem-volunteers.html" class="nav-item"><i class="ti ti-heart-handshake"></i> Volunteers</a>
                <a href="ecosystem-donations.html" class="nav-item"><i class="ti ti-currency-dollar"></i> Donations</a>
                <a href="ecosystem-email.html" class="nav-item"><i class="ti ti-mail"></i> Email</a>
                <a href="ecosystem-sms.html" class="nav-item"><i class="ti ti-message"></i> SMS</a>
                <a href="ecosystem-events.html" class="nav-item"><i class="ti ti-calendar-event"></i> Events</a>
                <a href="campaign-wizard-step1.html" class="nav-item"><i class="ti ti-wand"></i> Campaign Wizard</a>
                <a href="ecosystem-analytics.html" class="nav-item"><i class="ti ti-chart-bar"></i> Analytics</a>
            </nav>
        </aside>
        
        <!-- Main Content -->
        <main class="main">
            <header class="topbar">
                <h1 class="page-title">Donor Intelligence</h1>
                <div class="grade-toggle">
                    <button class="grade-toggle-btn active" onclick="setGradeView('state')" id="btn-state">
                        <i class="ti ti-map"></i> Statewide
                    </button>
                    <button class="grade-toggle-btn" onclick="setGradeView('district')" id="btn-district">
                        <i class="ti ti-route"></i> By District
                    </button>
                    <button class="grade-toggle-btn" onclick="setGradeView('county')" id="btn-county">
                        <i class="ti ti-building-community"></i> By County
                    </button>
                </div>
            </header>
            
            <div class="page-content">
                <!-- Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value blue" id="total-donors">243,575</div>
                        <div class="stat-label">Total Donors</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value green" id="total-donations">$47.2M</div>
                        <div class="stat-label">Total Donations (5yr)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value purple" id="a-tier-count">12,178</div>
                        <div class="stat-label">A-Tier Donors</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value orange" id="context-count">100</div>
                        <div class="stat-label" id="context-label">NC Counties</div>
                    </div>
                </div>
                
                <!-- District Selector (hidden by default) -->
                <div class="context-selector" id="district-selector">
                    <label class="context-label">Select District</label>
                    <select class="context-select" id="district-select" onchange="loadDistrictData()">
                        <option value="">Select a District...</option>
                        <optgroup label="NC State House">
                            <option value="HD-087">HD-87 (Caldwell/Watauga) - Destin Hall</option>
                            <option value="HD-074">HD-74 (Forsyth) - Jeff Zenger</option>
                            <option value="HD-075">HD-75 (Forsyth) - Donny Lambeth</option>
                            <option value="HD-036">HD-36 (Wake) - Erin ParÃ©</option>
                            <option value="HD-037">HD-37 (Wake) - John Bell</option>
                            <option value="HD-098">HD-98 (Mecklenburg) - John Bradford</option>
                            <option value="HD-001">HD-1 (Camden/Currituck/Pasquotank)</option>
                            <option value="HD-002">HD-2 (Dare/Hyde/Tyrrell)</option>
                        </optgroup>
                        <optgroup label="NC State Senate">
                            <option value="SD-41">SD-41 (Caldwell/Burke/Catawba) - Warren Daniel</option>
                            <option value="SD-31">SD-31 (Forsyth) - Joyce Krawiec</option>
                            <option value="SD-32">SD-32 (Forsyth) - Paul Lowe</option>
                            <option value="SD-37">SD-37 (Mecklenburg) - Vickie Sawyer</option>
                        </optgroup>
                        <optgroup label="US Congress">
                            <option value="CD-05">CD-5 (NW Mountains) - Virginia Foxx</option>
                            <option value="CD-06">CD-6 (Triad) - Kathy Manning</option>
                            <option value="CD-13">CD-13 (Triangle) - Wiley Nickel</option>
                        </optgroup>
                    </select>
                </div>
                
                <!-- County Selector (hidden by default) -->
                <div class="context-selector" id="county-selector">
                    <label class="context-label">Select County</label>
                    <select class="context-select" id="county-select" onchange="loadCountyData()">
                        <option value="">Select a County...</option>
                        <option value="Alamance">Alamance County</option>
                        <option value="Alleghany">Alleghany County</option>
                        <option value="Buncombe">Buncombe County</option>
                        <option value="Burke">Burke County</option>
                        <option value="Cabarrus">Cabarrus County</option>
                        <option value="Caldwell">Caldwell County</option>
                        <option value="Catawba">Catawba County</option>
                        <option value="Cumberland">Cumberland County</option>
                        <option value="Davidson">Davidson County</option>
                        <option value="Durham">Durham County</option>
                        <option value="Forsyth">Forsyth County</option>
                        <option value="Gaston">Gaston County</option>
                        <option value="Guilford">Guilford County</option>
                        <option value="Iredell">Iredell County</option>
                        <option value="Johnston">Johnston County</option>
                        <option value="Mecklenburg">Mecklenburg County</option>
                        <option value="New Hanover">New Hanover County</option>
                        <option value="Onslow">Onslow County</option>
                        <option value="Orange">Orange County</option>
                        <option value="Pitt">Pitt County</option>
                        <option value="Randolph">Randolph County</option>
                        <option value="Rowan">Rowan County</option>
                        <option value="Union">Union County</option>
                        <option value="Wake">Wake County</option>
                        <option value="Watauga">Watauga County</option>
                    </select>
                </div>
                
                <!-- Triple Grade Comparison -->
                <div class="triple-grade-card">
                    <div class="triple-grade-header">
                        <div class="triple-grade-title">Triple Grade Distribution</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">Same donors, different rankings by context</div>
                    </div>
                    
                    <div class="grade-comparison">
                        <!-- State Grades -->
                        <div class="grade-column active" id="col-state">
                            <div class="grade-column-title">
                                <i class="ti ti-map"></i> Statewide (243,575)
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A++</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 2%;">244</div></div>
                                <span class="grade-count">244</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A+</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 8%;">2,192</div></div>
                                <span class="grade-count">2,192</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 32%;">9,743</div></div>
                                <span class="grade-count">9,743</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B+</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 80%;">24,358</div></div>
                                <span class="grade-count">24,358</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 80%;">24,358</div></div>
                                <span class="grade-count">24,358</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">C</span>
                                <div class="grade-bar-bg"><div class="grade-bar c" style="width: 100%;">48,715</div></div>
                                <span class="grade-count">48,715</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">D</span>
                                <div class="grade-bar-bg"><div class="grade-bar d" style="width: 100%;">73,073</div></div>
                                <span class="grade-count">73,073</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">U</span>
                                <div class="grade-bar-bg"><div class="grade-bar u" style="width: 100%;">60,892</div></div>
                                <span class="grade-count">60,892</span>
                            </div>
                        </div>
                        
                        <!-- District Grades -->
                        <div class="grade-column" id="col-district">
                            <div class="grade-column-title">
                                <i class="ti ti-route"></i> District HD-87 (2,847)
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A++</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 4%;">3</div></div>
                                <span class="grade-count">3</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A+</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 12%;">28</div></div>
                                <span class="grade-count">28</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 40%;">114</div></div>
                                <span class="grade-count">114</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B+</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 80%;">285</div></div>
                                <span class="grade-count">285</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 80%;">285</div></div>
                                <span class="grade-count">285</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">C</span>
                                <div class="grade-bar-bg"><div class="grade-bar c" style="width: 100%;">569</div></div>
                                <span class="grade-count">569</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">D</span>
                                <div class="grade-bar-bg"><div class="grade-bar d" style="width: 100%;">854</div></div>
                                <span class="grade-count">854</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">U</span>
                                <div class="grade-bar-bg"><div class="grade-bar u" style="width: 100%;">709</div></div>
                                <span class="grade-count">709</span>
                            </div>
                        </div>
                        
                        <!-- County Grades -->
                        <div class="grade-column" id="col-county">
                            <div class="grade-column-title">
                                <i class="ti ti-building-community"></i> Caldwell County (1,845)
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A++</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 3%;">2</div></div>
                                <span class="grade-count">2</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A+</span>
                                <div class="grade-bar-bg"><div class="grade-bar a-plus" style="width: 10%;">18</div></div>
                                <span class="grade-count">18</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">A</span>
                                <div class="grade-bar-bg"><div class="grade-bar a" style="width: 38%;">74</div></div>
                                <span class="grade-count">74</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B+</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 78%;">185</div></div>
                                <span class="grade-count">185</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">B</span>
                                <div class="grade-bar-bg"><div class="grade-bar b" style="width: 78%;">185</div></div>
                                <span class="grade-count">185</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">C</span>
                                <div class="grade-bar-bg"><div class="grade-bar c" style="width: 100%;">369</div></div>
                                <span class="grade-count">369</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">D</span>
                                <div class="grade-bar-bg"><div class="grade-bar d" style="width: 100%;">554</div></div>
                                <span class="grade-count">554</span>
                            </div>
                            <div class="grade-row">
                                <span class="grade-label">U</span>
                                <div class="grade-bar-bg"><div class="grade-bar u" style="width: 100%;">458</div></div>
                                <span class="grade-count">458</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Donor Table -->
                <div class="table-card">
                    <div class="table-header">
                        <div class="table-title" id="table-title">Top Donors - Statewide View</div>
                        <div class="filter-bar">
                            <input type="text" class="filter-input" placeholder="Search donors..." id="search-input">
                            <button class="filter-btn active" data-grade="all">All</button>
                            <button class="filter-btn" data-grade="A">A-Tier</button>
                            <button class="filter-btn" data-grade="B">B-Tier</button>
                            <button class="filter-btn" data-grade="C">C-Tier</button>
                        </div>
                    </div>
                    
                    <table class="donor-table">
                        <thead>
                            <tr>
                                <th>Donor</th>
                                <th>State Grade</th>
                                <th>District Grade</th>
                                <th>County Grade</th>
                                <th>Total Donations</th>
                                <th>Location</th>
                            </tr>
                        </thead>
                        <tbody id="donor-table-body">
                            <tr>
                                <td>
                                    <div class="donor-name">Art Pope</div>
                                    <div class="donor-location">Wake County â€¢ HD-36</div>
                                </td>
                                <td><span class="grade-badge a-plus highlight">A++</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$2,847,500</td>
                                <td><span class="rank-badge">#1 State â€¢ #1 HD-36 â€¢ #1 Wake</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Ed Broyhill</div>
                                    <div class="donor-location">Forsyth County â€¢ HD-74</div>
                                </td>
                                <td><span class="grade-badge a-plus highlight">A+</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$485,000</td>
                                <td><span class="rank-badge">#31 State â€¢ #1 HD-74 â€¢ #1 Forsyth</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Robert Williams</div>
                                    <div class="donor-location">Alleghany County â€¢ HD-93</div>
                                </td>
                                <td><span class="grade-badge c highlight">C+</span></td>
                                <td><span class="grade-badge a">A</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$4,200</td>
                                <td><span class="rank-badge">#52,891 State â€¢ #8 HD-93 â€¢ #1 Alleghany</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Sarah Mitchell</div>
                                    <div class="donor-location">Caldwell County â€¢ HD-87</div>
                                </td>
                                <td><span class="grade-badge b highlight">B+</span></td>
                                <td><span class="grade-badge a-plus">A+</span></td>
                                <td><span class="grade-badge a-plus">A++</span></td>
                                <td class="amount">$18,500</td>
                                <td><span class="rank-badge">#8,234 State â€¢ #2 HD-87 â€¢ #1 Caldwell</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">James Thompson</div>
                                    <div class="donor-location">Watauga County â€¢ HD-87</div>
                                </td>
                                <td><span class="grade-badge c highlight">C</span></td>
                                <td><span class="grade-badge a">A-</span></td>
                                <td><span class="grade-badge a-plus">A+</span></td>
                                <td class="amount">$3,800</td>
                                <td><span class="rank-badge">#61,234 State â€¢ #15 HD-87 â€¢ #3 Watauga</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="donor-name">Lisa Chen</div>
                                    <div class="donor-location">Mecklenburg County â€¢ HD-98</div>
                                </td>
                                <td><span class="grade-badge a highlight">A</span></td>
                                <td><span class="grade-badge b">B+</span></td>
                                <td><span class="grade-badge b">B</span></td>
                                <td class="amount">$45,000</td>
                                <td><span class="rank-badge">#2,891 State â€¢ #234 HD-98 â€¢ #456 Meck</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Insight Card -->
                <div class="insight-card">
                    <h3>ðŸ’¡ Triple Grading Insight - Why It Matters</h3>
                    <p>
                        <strong>Sarah Mitchell</strong> is only <strong>B+</strong> statewide (#8,234 of 243,575), but she's <strong>A+</strong> in HD-87 (#2) and <strong>A++</strong> in Caldwell County (#1).
                        <br><br>
                        For <strong>Destin Hall's State House race (HD-87)</strong>, Sarah should be treated as a TOP donor and asked for <strong>$5,000-$6,800</strong>.<br>
                        For a <strong>Governor's race</strong>, she's mid-tier and should be asked for <strong>$1,000</strong>.
                        <br><br>
                        <strong>The AI auto-selects the right grade based on the candidate's office type.</strong>
                    </p>
                </div>
                
                <!-- Office Context Mapping -->
                <div class="triple-grade-card" style="margin-top: 24px;">
                    <div class="triple-grade-header">
                        <div class="triple-grade-title">Office Context Mapping</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">AI automatically selects the right grade based on race type</div>
                    </div>
                    
                    <table class="context-table">
                        <thead>
                            <tr>
                                <th>Office Type</th>
                                <th>Grade Context</th>
                                <th>Reason</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>US Senate</strong></td>
                                <td><span class="context-badge state">Statewide</span></td>
                                <td>Statewide electorate</td>
                            </tr>
                            <tr>
                                <td><strong>US House</strong></td>
                                <td><span class="context-badge district">District</span></td>
                                <td>Congressional district boundaries</td>
                            </tr>
                            <tr>
                                <td><strong>Governor, Lt. Gov, Council of State</strong></td>
                                <td><span class="context-badge state">Statewide</span></td>
                                <td>Statewide offices</td>
                            </tr>
                            <tr>
                                <td><strong>NC Supreme Court, Court of Appeals</strong></td>
                                <td><span class="context-badge state">Statewide</span></td>
                                <td>Statewide judicial elections</td>
                            </tr>
                            <tr>
                                <td><strong>NC State Senate</strong></td>
                                <td><span class="context-badge district">District</span></td>
                                <td>Senate district (2-4 counties)</td>
                            </tr>
                            <tr>
                                <td><strong>NC State House</strong></td>
                                <td><span class="context-badge district">District</span></td>
                                <td>House district (1-2 counties)</td>
                            </tr>
                            <tr>
                                <td><strong>Superior Court, District Court</strong></td>
                                <td><span class="context-badge district">District</span></td>
                                <td>Judicial district boundaries</td>
                            </tr>
                            <tr>
                                <td><strong>County Commissioner, Sheriff, Clerk</strong></td>
                                <td><span class="context-badge county">County</span></td>
                                <td>County-wide offices</td>
                            </tr>
                            <tr>
                                <td><strong>Mayor, City Council, School Board</strong></td>
                                <td><span class="context-badge county">County</span></td>
                                <td>Municipal/local offices</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        let currentView = 'state';
        
        // Grade view toggle
        function setGradeView(view) {
            currentView = view;
            
            // Update buttons
            document.getElementById('btn-state').classList.toggle('active', view === 'state');
            document.getElementById('btn-district').classList.toggle('active', view === 'district');
            document.getElementById('btn-county').classList.toggle('active', view === 'county');
            
            // Update column highlights
            document.getElementById('col-state').classList.toggle('active', view === 'state');
            document.getElementById('col-district').classList.toggle('active', view === 'district');
            document.getElementById('col-county').classList.toggle('active', view === 'county');
            
            // Show/hide selectors
            document.getElementById('district-selector').classList.toggle('visible', view === 'district');
            document.getElementById('county-selector').classList.toggle('visible', view === 'county');
            
            // Update stats
            const contextCount = document.getElementById('context-count');
            const contextLabel = document.getElementById('context-label');
            
            if (view === 'state') {
                contextCount.textContent = '243,575';
                contextLabel.textContent = 'Total Donors';
                document.getElementById('table-title').textContent = 'Top Donors - Statewide View';
            } else if (view === 'district') {
                contextCount.textContent = '120';
                contextLabel.textContent = 'NC House Districts';
                document.getElementById('table-title').textContent = 'Top Donors - District View';
            } else {
                contextCount.textContent = '100';
                contextLabel.textContent = 'NC Counties';
                document.getElementById('table-title').textContent = 'Top Donors - County View';
            }
            
            // Update grade badge highlights in table
            updateTableHighlights(view);
        }
        
        function updateTableHighlights(view) {
            const rows = document.querySelectorAll('#donor-table-body tr');
            rows.forEach(row => {
                const badges = row.querySelectorAll('.grade-badge');
                badges.forEach((badge, index) => {
                    badge.classList.remove('highlight');
                    if ((view === 'state' && index === 0) ||
                        (view === 'district' && index === 1) ||
                        (view === 'county' && index === 2)) {
                        badge.classList.add('highlight');
                    }
                });
            });
        }
        
        // District data loader
        function loadDistrictData() {
            const district = document.getElementById('district-select').value;
            if (district) {
                document.getElementById('table-title').textContent = `Top Donors - ${district}`;
                document.getElementById('col-district').querySelector('.grade-column-title').innerHTML = 
                    `<i class="ti ti-route"></i> ${district}`;
                console.log(`Loading data for ${district}...`);
                // In production, this would fetch from Supabase
            }
        }
        
        // County data loader
        function loadCountyData() {
            const county = document.getElementById('county-select').value;
            if (county) {
                document.getElementById('table-title').textContent = `Top Donors - ${county} County`;
                document.getElementById('col-county').querySelector('.grade-column-title').innerHTML = 
                    `<i class="ti ti-building-community"></i> ${county} County`;
                console.log(`Loading data for ${county} county...`);
                // In production, this would fetch from Supabase
            }
        }
        
        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const grade = this.dataset.grade;
                console.log(`Filtering by grade: ${grade}`);
                // Filter logic would go here
            });
        });
        
        // Initialize
        updateTableHighlights('state');
    </script>
</body>
</html>
