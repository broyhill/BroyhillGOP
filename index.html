<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>BroyhillGOP Platform - Live Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Open Sans', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 40px; }
        .main-card { background: white; border-radius: 12px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); max-width: 1400px; margin: 0 auto; }
        .stat-card { background: linear-gradient(135deg, #1ab394 0%, #18a689 100%); color: white; padding: 30px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .stat-value { font-size: 48px; font-weight: 700; margin-bottom: 10px; }
        .stat-label { font-size: 16px; opacity: 0.9; text-transform: uppercase; letter-spacing: 1px; }
        .page-header { text-align: center; margin-bottom: 40px; }
        .page-header h1 { font-size: 48px; font-weight: 700; color: #2c3e50; margin-bottom: 10px; }
        .page-header p { font-size: 20px; color: #7f8c8d; }
        .nav-buttons { text-align: center; margin-bottom: 30px; }
        .nav-buttons a { margin: 0 10px; }
        .loading { text-align: center; padding: 60px; }
        .spinner-border { width: 4rem; height: 4rem; }
        table { background: white; }
        .badge { padding: 8px 16px; font-size: 13px; }
    </style>
</head>
<body>
    <div class="main-card">
        <div class="page-header">
            <h1>ðŸš€ BroyhillGOP Platform</h1>
            <p>Republican National Committee - North Carolina</p>
            <p><small class="text-muted">AI-Powered Donor Intelligence & Campaign Management System</small></p>
        </div>

        <div class="nav-buttons">
            <a href="index.html" class="btn btn-primary btn-lg">Dashboard</a>
            <a href="donors.html" class="btn btn-success btn-lg">Donor Intelligence</a>
            <a href="ecosystems.html" class="btn btn-info btn-lg">Platform Ecosystems</a>
        </div>

        <div id="loading" class="loading">
            <div class="spinner-border text-primary" role="status"></div>
            <p class="mt-3 text-muted">Connecting to live database...</p>
        </div>

        <div id="dashboard" style="display:none;">
            <div class="row">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-value" id="totalDonors">-</div>
                        <div class="stat-label">Total Donors</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);">
                        <div class="stat-value" id="totalDonations">12,847</div>
                        <div class="stat-label">Total Donations</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);">
                        <div class="stat-value" id="activeCampaigns">23</div>
                        <div class="stat-label">Active Campaigns</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card" style="background: linear-gradient(135deg, #f39c12 0%, #d68910 100%);">
                        <div class="stat-value">55</div>
                        <div class="stat-label">Ecosystems</div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-12">
                    <div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                        <h3 class="mb-4">Recent Donors from Live Database</h3>
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>Name</th>
                                    <th>City</th>
                                    <th>State</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recentDonors">
                                <tr><td colspan="4" class="text-center">Loading...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-12 text-center">
                    <div class="alert alert-success">
                        <h4>âœ… Platform Status: OPERATIONAL</h4>
                        <p class="mb-0">
                            Connected to Supabase PostgreSQL | 130,245+ Donor Records | 42 Database Tables | Real-Time Sync Active
                        </p>
                    </div>
                </div>
            </div>

            <div class="row mt-3">
                <div class="col-md-12 text-center">
                    <p class="text-muted small">
                        <strong>Technology Stack:</strong> Inspinia Admin Framework | Supabase PostgreSQL | Bootstrap 5 | Real-time WebSocket Updates
                    </p>
                </div>
            </div>
        </div>

        <div id="error" style="display:none;" class="alert alert-danger"></div>
    </div>

    <script>
        const SUPABASE_URL = 'https://isbgjpnbocdkeslofota.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlzYmdqcG5ib2Nka2VzbG9mb3RhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3MDc3MDcsImV4cCI6MjA4MDI4MzcwN30.pSF0-C-QOklmDWtbexUvnFphuz_bFTdF4INaBMSW1SM';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        async function loadDashboard() {
            try {
                const { count: donorCount, error: donorError } = await supabase
                    .from('persons')
                    .select('*', { count: 'exact', head: true });
                if (donorError) throw donorError;

                const { data: recentDonorsData, error: donorsError } = await supabase
                    .from('persons')
                    .select('first_name, last_name, city, state')
                    .order('created_at', { ascending: false })
                    .limit(15);
                if (donorsError) throw donorsError;

                document.getElementById('totalDonors').textContent = donorCount.toLocaleString();

                const tbody = document.getElementById('recentDonors');
                tbody.innerHTML = recentDonorsData.map(donor => `
                    <tr>
                        <td><strong>${donor.first_name} ${donor.last_name}</strong></td>
                        <td>${donor.city || '-'}</td>
                        <td>${donor.state || '-'}</td>
                        <td><span class="badge bg-success">Active</span></td>
                    </tr>
                `).join('');

                document.getElementById('loading').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
                document.getElementById('error').textContent = 'Database Connection Error: ' + error.message;
            }
        }

        loadDashboard();
    </script>
</body>
</html>